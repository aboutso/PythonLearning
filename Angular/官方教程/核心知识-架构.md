# 核心知识 
## 架构概览
1. Angular 是一个用 HTML 和 TypeScript 构建客户端应用的平台与框架。
2. Angular 的基本构造块是 **NgModule**，它*为组件提供了编译的上下文环境*。 Angular 应用就是由一组**NgModule** 定义出的。应用至少会有一个用于引导应用的**根模块**，通常还会有很多**特性模块**。
    - 组件定义视图
    - 组件使用服务。
3. 组件和服务都是简单的类，这些类使用**装饰器**来标出它们的类型，并提供元数据以告知 Angular 该如何使用它们。
- 组件类的元数据将组件类和一个用来定义视图的**模板**关联起来。 模板把普通的 HTML 和 Angular 指令与绑定标记（markup）组合起来，这样 Angular 就可以在呈现 HTML 之前先修改这些 HTML
- 服务类的元数据提供了一些信息，Angular 要用这些信息来让组件可以通过依赖注入（DI）使用该服务
4.  Angular 提供了**Router**服务来帮助你定义视图之间的导航路径。 路由器提供了先进的浏览器内导航功能

![AngularStructure](.\img\AngularStructure.png)

### 模块Modules NgModule
1. NgModule 为一个组件集声明了编译的上下文环境，它专注于某个应用领域、某个工作流或一组紧密相关的能力。 NgModule 可以将其组件和一组相关代码（如服务）关联起来，形成功能单元。
2. 每个 Angular 应用都有一个根模块，通常命名为`AppModule`。根模块提供了用来启动应用的引导机制。 一个应用通常会包含很多功能模块。
    
    #### @NgModule 元数据
    - NgModule 是一个带有 @NgModule() 装饰器的类。
    - @NgModule() 装饰器是一个函数，它接受一个元数据对象，该对象的属性用来描述这个模块。
    - 属性：
        - declarations（可声明对象表） —— 那些属于本 NgModule 的组件、指令、管道。
        - exports（导出表） —— 那些**能在其它模块的组件模板中使用**的可声明对象的子集。
        - imports（导入表） —— 那些导出了本模块中的组件模板所需的类的其它模块。
        - providers —— **本模块向全局服务中贡献的那些服务的创建器**。 这些服务能被本应用中的任何部分使用。（你也可以在组件级别指定服务提供商，这通常是首选方式。）
        - bootstrap —— 应用的主视图，称为根组件。它是应用中所有其它视图的宿主。只有根模块才应该设置这个 bootstrap 属性。
    - 组件及其模板共同定义**视图**
    - 当你创建一个组件时，它直接与一个叫做**宿主视图**的视图关联起来。 宿主视图可以是视图层次结构的根，该视图层次结构可以包含一些内嵌视图，这些内嵌视图又是其它组件的宿主视图。 这些组件可以位于相同的 NgModule 中，也可以从其它 NgModule 中导入。 树中的视图可以嵌套到任意深度
3. Angular 自带的库
- 每个 Angular 库的名称都带有`@angular`前缀。 使用 npm 包管理器安装 Angular 的库，并使用 JavaScript 的`import`语句导入其中的各个部分。
### 组件Components
1. 每个 Angular 应用都至少有一个组件，也就是**根组件**，它会把组件树和页面中的 DOM 连接起来。
- 组件控制屏幕上被称为视图的一小片区域
2.  `@Component()`**装饰器**表明紧随它的那个类是一个组件，并提供模板和该组件专属的元数据。
- 组件的元数据告诉 Angular 到哪里获取它需要的主要构造块，以创建和展示这个组件及其视图。它把一个模板（无论是直接内联在代码中还是引用的外部文件）和该组件关联起来。
- 该组件及其模板，共同描述了一个视图
- 最常用的 @Component 配置选项:
    - **selector**：是一个 CSS 选择器，它会告诉 Angular，一旦在模板 HTML 中找到了这个选择器对应的标签，就创建并插入该组件的一个实例。
    - **templateUrl**：该组件的 HTML 模板文件相对于这个组件文件的地址
    - **providers**：当前组件所需的服务提供商的一个数组
3. 管道
- 要在 HTML 模板中指定值的转换方式，请使用 管道操作符 (|)

    `{{interpolated_value | pipe_name}}`
### 模板、指令和数据绑定
1. 模板会把 HTML 和 Angular 的标记（markup）组合起来，这些标记可以在 HTML 元素显示出来之前修改它们
2. 模板中的**指令**会提供程序逻辑.指令就是一个带有`@Directive()`装饰器的类。
- 组件从技术角度上说就是一个指令，但是由于组件对 Angular 应用来说非常独特、非常重要，因此 Angular 专门定义了 @Component() 装饰器，它使用一些面向模板的特性扩展了 @Directive() 装饰器。
- **结构型指令 Structural directives**——通过添加、移除或替换 DOM 元素来修改布局
- **属性型指令Attribute directives**——修改现有元素的外观或行为
3. 数据绑定标记的四种形式

    ![AngularStructure](.\img\databinding.png)

4. 绑定标记会把你应用中的数据和 DOM 连接在一起:
    - **事件绑定Event binding**让你的应用可以通过更新应用的数据来响应目标环境下的用户输入。
    - **属性绑定Property binding**让你将从应用数据中计算出来的值插入到 HTML 中。
    -  Angular 支持**双向数据绑定**
### 服务与依赖注入
1. 对于与特定视图无关并希望跨组件共享的数据或逻辑，可以创建**服务**类。
    - 理想情况下，组件的工作只管用户体验，而不用顾及其它。 它应该提供用于数据绑定的属性和方法，以便作为视图（由模板渲染）和应用逻辑（通常包含一些模型的概念）的**中介者**
2.  服务类的定义通常紧跟在`@Injectable()`**装饰器**之后。该装饰器提供的元数据可以让你的服务作为依赖被注入到组件中。**组件是服务的消费者**。
3. 使用`@Injectable()`装饰器来表明一个组件或其它类（比如另一个服务、管道或 NgModule）拥有一个依赖
    > `@Injectable()`同时用来声明注入者和被注入者
    - **注入器 injector 是主要的机制**。Angular 会在启动过程中为你创建全应用级注入器以及所需的其它注入器。*不用自己创建注入器*
    - 注入器会创建依赖、维护一个容器来管理这些依赖，并尽可能复用它们
    - **提供商 provider**是一个对象，用来告诉注入器应该如何获取或创建依赖
4. 应用中所需的任何依赖，都必须**使用该应用的注入器来注册一个提供商**，以便注入器可以使用这个提供商来创建新实例
5. 对于要用到的任何服务，你必须至少注册一个提供商。服务可以在自己的元数据中把自己注册为提供商或者为特定的模块或组件注册提供商。
    - Angular CLI 的`ng generate service`命令会在 @Injectable() 装饰器中提供元数据来把它注册到根注入器中
        ```JS
        @Injectable({
            providedIn: 'root',
        })
        ```
    - 使用特定的`NgModule`注册提供商时，该服务的同一个实例将会对该 NgModule 中的所有组件可用。用 @NgModule() 装饰器中的**providers**属性
        ```JS
        @NgModule({
            providers: [
            BackendService,
            Logger
            ],
            ...
        })
        ```
    - 在组件级注册提供商时，你会为该组件的每一个新实例提供该服务的一个新实例.在 `@Component()`元数据的**providers**属性中注册服务提供商
        ```JS
        @Component({
            selector:    'app-hero-list',
            templateUrl: './hero-list.component.html',
            providers:  [ HeroService ]
        })
        ```
### 路由
1. Angular 的 Router 模块提供了一个服务，它可以让你定义在应用的各个不同状态和视图层次结构之间导航时要使用的路径
